<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Focus Example</title>
    </head>
    <body>
        <div class="flex flex-col gap-2">
            <div id="editable-bio" class="outline-none">
                <h1 class="text-4xl font-bold">Hello, I'm Leo ðŸ‘‹</h1>
                <p class="text-gray-600 mt-2" contenteditable="true" required>
                    An enthusiastic 20 years old developer, that has a clear
                    goal and ambition...
                </p>
            </div>

            <div class="flex gap-2 mt-2">
                <button id="edit-btn" onclick="startEditing()"
                    class="hover:opacity-70">
                </button>
                <button id="save-btn" onclick="stopEditing()"
                    class="hidden hover:opacity-70">
                </button>
            </div>
        </div>

        <script>

        function startEditing() {
        const container = document.getElementById('editable-bio');
        const editBtn = document.getElementById('edit-btn');
        const saveBtn = document.getElementById('save-btn');

        // 1. Make the text editable
        container.contentEditable = "true";

        // 2. Add a visual border so you know it's active
        container.classList.add('border-b-2', 'border-blue-400', 'pb-2');

        // 3. Focus the cursor at the very beginning
        container.focus();

        // 4. Swap the icons
        editBtn.classList.add('hidden');
        saveBtn.classList.remove('hidden');
        }

        async function stopEditing() {
        const container = document.getElementById('editable-bio');
        const editBtn = document.getElementById('edit-btn');
        const saveBtn = document.getElementById('save-btn');

        // 1. Lock the text
        container.contentEditable = "false";
        container.classList.remove('border-b-2', 'border-blue-400', 'pb-2');

        // 2. Swap icons back
        saveBtn.classList.add('hidden');
        editBtn.classList.remove('hidden');

        // 3. Send the updated HTML/Text to your Express server
        const updatedContent = container.innerHTML;

        await fetch('/api/update-bio', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ bioHtml: updatedContent })
        });
        }
        </script>
    </body>
</html>